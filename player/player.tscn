[gd_scene load_steps=109 format=3 uid="uid://m6pypgl566n1"]

[ext_resource type="Script" path="res://player/player.gd" id="1_ref5g"]
[ext_resource type="Script" path="res://player/smooth_camera.gd" id="2_cywkd"]
[ext_resource type="Script" path="res://scripts/state_machine/state_machine.gd" id="2_g0cef"]
[ext_resource type="Script" path="res://scripts/state_machine/states/idle.gd" id="3_4b8lt"]
[ext_resource type="Script" path="res://scripts/state_machine/states/walk.gd" id="4_gw7tn"]
[ext_resource type="Script" path="res://scripts/state_machine/states/walker.gd" id="5_h6v2u"]
[ext_resource type="Script" path="res://scripts/state_machine/states/aim.gd" id="6_rtwvu"]
[ext_resource type="Script" path="res://scripts/state_machine/states/prepare_gun.gd" id="7_hfrgh"]
[ext_resource type="PackedScene" uid="uid://bjq2dkpgpnav7" path="res://player/game_over_menu.tscn" id="7_keanm"]
[ext_resource type="Script" path="res://scripts/state_machine/states/Unbalanced.gd" id="8_7b01x"]
[ext_resource type="FontFile" uid="uid://dc0vrsfwu33ll" path="res://assets/fonts/roboto/Roboto-Regular.ttf" id="8_dofuu"]
[ext_resource type="Script" path="res://scripts/state_machine/states/Downed.gd" id="9_q33c7"]
[ext_resource type="Script" path="res://scripts/state_machine/states/long_interaction.gd" id="10_b71wi"]
[ext_resource type="Script" path="res://player/ammo_counter.gd" id="11_xb6v7"]
[ext_resource type="Script" path="res://scripts/state_machine/states/crowbar_swing.gd" id="12_6so70"]
[ext_resource type="Shape3D" uid="uid://df6y055xrghl7" path="res://player/player_normal_collision_shape.tres" id="12_6t6rn"]
[ext_resource type="Script" path="res://scripts/state_machine/states/take_pill.gd" id="13_dsee1"]
[ext_resource type="Script" path="res://player/player_ui.gd" id="14_0ypvp"]
[ext_resource type="Script" path="res://scripts/state_machine/states/load_gun.gd" id="14_3bkdw"]
[ext_resource type="Script" path="res://scripts/state_machine/states/change_batteries.gd" id="15_6uppe"]
[ext_resource type="Script" path="res://player/inventory.gd" id="15_8pfmq"]
[ext_resource type="Script" path="res://player/balance.gd" id="16_ipk1w"]
[ext_resource type="PackedScene" uid="uid://cdlefkst24dm8" path="res://player/player_ui.tscn" id="17_e0317"]
[ext_resource type="Resource" uid="uid://c27ts5odnmaxq" path="res://scripts/resources/reload_hint.tres" id="18_6q2xb"]
[ext_resource type="Script" path="res://player/balance_feedback.gd" id="18_y0x57"]
[ext_resource type="Script" path="res://player/player_health.gd" id="20_8ocdq"]
[ext_resource type="PackedScene" uid="uid://4j0uw0ki1luc" path="res://player/walker.tscn" id="20_qts6k"]
[ext_resource type="PackedScene" uid="uid://cpyss678yatou" path="res://assets/props/gun/gun_model.tscn" id="21_lgr1q"]
[ext_resource type="Script" path="res://player/player_animation_controller.gd" id="22_j0g4a"]
[ext_resource type="PackedScene" uid="uid://ctrkoynx6fbcj" path="res://assets/props/crowbar/crowbar.tscn" id="22_r00kl"]
[ext_resource type="Script" path="res://player/crowbar_attack_hitbox.gd" id="24_nhdqm"]
[ext_resource type="FontFile" uid="uid://djkxaekxrwieb" path="res://assets/fonts/roboto/Roboto-Italic.ttf" id="26_ekr4f"]
[ext_resource type="Script" path="res://player/crosshair.gd" id="27_ktygo"]
[ext_resource type="Texture2D" uid="uid://brv17rwye8h7b" path="res://assets/UI/screen_overlay_01.png" id="28_43xm4"]
[ext_resource type="PackedScene" uid="uid://cv00qs5ggy5x" path="res://assets/props/flaslight/flaslight.tscn" id="28_lrh3t"]
[ext_resource type="Script" path="res://player/balanced_ui.gd" id="28_qoh17"]
[ext_resource type="Texture2D" uid="uid://7g1tf1lcm1l7" path="res://assets/UI/tile_0233.png" id="28_rfyh2"]
[ext_resource type="LabelSettings" uid="uid://c8klxxn36vp7j" path="res://game_ui/quick_time_event.tres" id="29_rdawv"]
[ext_resource type="PackedScene" uid="uid://ccacel4hrjcs8" path="res://assets/props/pills/pills.tscn" id="29_vkalu"]
[ext_resource type="Texture2D" uid="uid://cngiemxinj0jx" path="res://assets/UI/screen_overlay_balance_01.png" id="30_c2sls"]
[ext_resource type="Script" path="res://player/player_game_menu.gd" id="31_0c3op"]
[ext_resource type="Texture2D" uid="uid://bm0w456skdflw" path="res://assets/UI/screen_overlay_02.png" id="31_i030a"]
[ext_resource type="LabelSettings" uid="uid://uvcnfvkxej6y" path="res://game_ui/flavour_text_lable_settings.tres" id="31_u8436"]
[ext_resource type="Texture2D" uid="uid://cybbasys4aa0v" path="res://assets/UI/screen_overlay_danger_01.png" id="32_sb6m1"]
[ext_resource type="Shader" path="res://shaders/vhs.gdshader" id="34_l5ybq"]
[ext_resource type="Script" path="res://game_manager/vhs_effect.gd" id="35_5ytlk"]
[ext_resource type="Script" path="res://player/player_audio_manager.gd" id="36_f26nf"]
[ext_resource type="AudioStream" uid="uid://cn6b3yjuqakb1" path="res://assets/audio/player/foot_step.wav" id="44_6afom"]
[ext_resource type="AudioStream" uid="uid://b4m717t5h023o" path="res://assets/audio/player/walker_draging.wav" id="45_2ydpv"]
[ext_resource type="AudioStream" uid="uid://c2t7j43t8n85h" path="res://assets/audio/bell.wav" id="46_ki68j"]
[ext_resource type="AudioStream" uid="uid://lgeiirv5ghph" path="res://assets/audio/player/hearthbeat.wav" id="49_234b6"]
[ext_resource type="AudioStream" uid="uid://u4m6ea32w656" path="res://assets/audio/hit_flesh.mp3" id="52_4w4ci"]
[ext_resource type="AudioStream" uid="uid://c6ogjlv610iok" path="res://assets/audio/hit_flesh.wav" id="53_2yagw"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_fyred"]

[sub_resource type="LabelSettings" id="LabelSettings_cswfq"]
font = ExtResource("8_dofuu")
font_size = 64

[sub_resource type="LabelSettings" id="LabelSettings_eftwr"]
font = ExtResource("26_ekr4f")
font_size = 15
outline_size = 2
outline_color = Color(0.165656, 0.165657, 0.165656, 1)
shadow_size = 4

[sub_resource type="Animation" id="Animation_xr14j"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0.823529, 0.823529, 0.823529, 0)]
}

[sub_resource type="Animation" id="Animation_61kqb"]
resource_name = "balance"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(-0.0333333, 1.03333, 2.03333, 3.03333, 4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Color(0.823529, 0.823529, 0.823529, 0), Color(0.823529, 0.823529, 0.823529, 1), Color(0.823529, 0.823529, 0.823529, 0), Color(0.823529, 0.823529, 0.823529, 1), Color(0.823529, 0.823529, 0.823529, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_0afux"]
_data = {
"RESET": SubResource("Animation_xr14j"),
"balance": SubResource("Animation_61kqb")
}

[sub_resource type="Animation" id="Animation_nxnfr"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_a0n8q"]
resource_name = "danger"
length = 2.0
loop_mode = 2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_dktf4"]
_data = {
"RESET": SubResource("Animation_nxnfr"),
"danger": SubResource("Animation_a0n8q")
}

[sub_resource type="LabelSettings" id="LabelSettings_3m322"]
font = ExtResource("26_ekr4f")
font_size = 15
outline_size = 2
outline_color = Color(0.165656, 0.165657, 0.165656, 1)
shadow_size = 4

[sub_resource type="FastNoiseLite" id="FastNoiseLite_acskl"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_fla38"]
noise = SubResource("FastNoiseLite_acskl")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_khsgn"]
shader = ExtResource("34_l5ybq")
shader_parameter/vhs_resolution = Vector2(640, 360)
shader_parameter/samples = 2
shader_parameter/crease_noise = 1.8
shader_parameter/crease_opacity = 0.5
shader_parameter/filter_intensity = 0.1
shader_parameter/tape_crease_smear = 0.1
shader_parameter/tape_crease_intensity = 0.2
shader_parameter/tape_crease_jitter = 0.1
shader_parameter/tape_crease_speed = 0.5
shader_parameter/tape_crease_discoloration = 1.0
shader_parameter/bottom_border_thickness = 0.0
shader_parameter/bottom_border_jitter = 0.0
shader_parameter/noise_intensity = 0.0
shader_parameter/noise_texture = SubResource("NoiseTexture2D_fla38")

[sub_resource type="Animation" id="Animation_1ivek"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = false
tracks/0/path = NodePath("CameraPivot:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0.3, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = false
tracks/1/path = NodePath("CameraPivot:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-1.309, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = false
tracks/2/path = NodePath("AnimatedObjects/GunModel:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("AnimatedObjects/GunModel:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, -1.5708)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("AnimatedObjects/Crowbar:rotation")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.750492, 2.67035, 0)]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("AnimatedObjects/Crowbar:position")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.085, -0.244, -0.957)]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("AnimatedObjects/FlaslightModel:rotation")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("AnimatedObjects/PillsModel:rotation")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.670154, 0, 0)]
}

[sub_resource type="Animation" id="Animation_6pxw8"]
resource_name = "change_batteries"
length = 2.7
loop_mode = 2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedObjects/FlaslightModel:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.433333, 0.6, 0.966667, 1.63333, 1.8, 2.26667, 2.56667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0, 0.170501), Vector3(-0.222309, -0.0389287, 0.111997), Vector3(-0.222309, -0.0389287, 0.111997), Vector3(-0.885113, -0.148591, -7.81696e-05), Vector3(0.21512, -0.141632, 0.272946), Vector3(0.21512, -0.141632, 0.272946), Vector3(-0.470814, -0.340719, 0.299987), Vector3(-0.797462, 0.16322, 0.051087)]
}

[sub_resource type="Animation" id="Animation_f0x85"]
resource_name = "floor"
length = 8.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CameraPivot:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(1, 2.2, 3, 4.4, 5.3, 5.9, 6.4, 7.1, 7.9),
"transitions": PackedFloat32Array(0.5, 2, 2, 0.5, 3.4822, 3.03143, 3.03143, 3.03143, 0.5),
"update": 0,
"values": [Vector3(0, -0.836486, 0), Vector3(0, -0.8, 0), Vector3(0, -0.836486, 0), Vector3(0, -0.81, 0), Vector3(0, -0.836486, 0), Vector3(0, -0.78, 0), Vector3(0, -0.78, 0), Vector3(0, -0.76, 0), Vector3(0, -0.836486, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CameraPivot:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.6, 3, 5.3, 5.9, 6.4, 7.1, 7.9),
"transitions": PackedFloat32Array(0.5, 2, 2, 3.4822, 3.03143, 3.03143, 3.03143, 0.5),
"update": 0,
"values": [Vector3(-0.610865, 0, -1.51844), Vector3(-0.610865, 0, -1.39626), Vector3(-0.610865, 0, -1.51844), Vector3(-0.610865, 0, -1.51844), Vector3(-1.5708, 0, 0), Vector3(-1.5708, 0, 0), Vector3(-1.5708, 0, 0), Vector3(-0.610865, 0, -1.51844)]
}

[sub_resource type="Animation" id="Animation_lwqgl"]
resource_name = "load_gun"
length = 1.8
loop_mode = 2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedObjects/GunModel:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.233333, 0.433333, 0.6, 0.8, 0.933333, 1.06667, 1.3, 1.5, 1.66667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(1.51435, 2.0736, -2.57015), Vector3(1.51435, 2.0736, -2.29685), Vector3(1.25525, 2.68379, -1.69179), Vector3(1.3554, 2.33537, -2.48435), Vector3(1.3554, 2.33537, -2.15274), Vector3(1.3554, 2.33537, -2.15274), Vector3(1.51435, 2.0736, -2.57015), Vector3(1.51435, 2.0736, -2.29685), Vector3(1.25525, 2.68379, -1.69179), Vector3(1.3554, 2.33537, -2.48435)]
}

[sub_resource type="Animation" id="Animation_hxgs6"]
resource_name = "losing_balance"
length = 7.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CameraPivot:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.9, 2.06667, 3.4, 4.76667, 5.63333, 6.1, 7),
"transitions": PackedFloat32Array(1, 1, 1, 1.7411, 0.574349, 1.56917, 0.615572, 1.93187),
"update": 0,
"values": [Vector3(0, 0.464, 0), Vector3(0.09, 0.67, 0), Vector3(-0.1, 0.53, 0), Vector3(0.1, 0.49, -0.02), Vector3(-0.01, 0.688, 0.016), Vector3(0.06, 0.5, -0.05), Vector3(-0.1, 0.469, -0.031), Vector3(0, 0.464, 0)]
}

[sub_resource type="Animation" id="Animation_yw3n8"]
resource_name = "no_animation"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = false
tracks/0/path = NodePath("CameraPivot:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 0,
"values": []
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = false
tracks/1/path = NodePath("CameraPivot:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 0,
"values": []
}

[sub_resource type="Animation" id="Animation_jsxkr"]
resource_name = "no_movement_pivot"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CameraPivot:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0.54, 0)]
}

[sub_resource type="Animation" id="Animation_ke5us"]
resource_name = "pills"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedObjects/PillsModel:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.133333, 0.3, 0.433333, 0.566667, 0.766667, 0.833333, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(-0.670154, 0, 0), Vector3(-0.670154, 5.7897e-08, -0.570426), Vector3(-0.670154, 5.7897e-08, -0.570426), Vector3(-0.670154, 3.18527e-08, 0.642351), Vector3(-0.670154, 3.18527e-08, 0.642351), Vector3(-0.670154, 4.77622e-08, -0.226631), Vector3(-0.670154, 1.11794e-07, 0.362732), Vector3(-0.670154, 1.18645e-07, 0.137881)]
}

[sub_resource type="Animation" id="Animation_838k8"]
resource_name = "prepare_crowbar"
length = 2.3
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedObjects/Crowbar:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.666667, 1.33333, 1.5, 2.3),
"transitions": PackedFloat32Array(0.732043, 1.27456, 1.8025, 1.41421, 1.51572),
"update": 0,
"values": [Vector3(-0.750492, 2.67035, 0), Vector3(-0.15708, 2.67035, 0), Vector3(0.00872665, 0.907571, 0), Vector3(0.00872665, 0.907571, 0), Vector3(0.00872665, 1.94604, 0.0349066)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("AnimatedObjects/Crowbar:position")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.666667, 1.33333, 1.5, 2.3),
"transitions": PackedFloat32Array(0.732043, 1.1487, 1.68179, 1.41421, 1.51572),
"update": 0,
"values": [Vector3(-0.085, -0.244, -0.957), Vector3(-0.085, -0.244, -0.957), Vector3(-0.055, -0.244, -0.957), Vector3(-0.055, -0.244, -0.957), Vector3(0.33, -0.099, -0.957)]
}

[sub_resource type="Animation" id="Animation_dutym"]
resource_name = "prepare_gun"
length = 1.8
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = false
tracks/0/path = NodePath("CameraPivot:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.6),
"transitions": PackedFloat32Array(2, 2),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-1.0472, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("AnimatedObjects/GunModel:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.0666667, 1.76667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("AnimatedObjects/GunModel:rotation")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.566667, 0.833333, 1.23333, 1.56667, 1.66667),
"transitions": PackedFloat32Array(0.5, 1.31951, 1.41421, 0.594603, 1),
"update": 0,
"values": [Vector3(1.51435, 2.0736, -2.57015), Vector3(1.51435, 1.9245, -2.57015), Vector3(0.214752, 1.5908, -2.91907), Vector3(0.201802, 1.6474, -2.64696), Vector3(0.215464, 1.58023, -2.96859)]
}

[sub_resource type="Animation" id="Animation_2vcw6"]
resource_name = "swing_crowbar"
length = 0.46
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedObjects/Crowbar:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.0666667, 0.166667, 0.266667, 0.366667, 0.46, 0.466667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0.00872665, 1.94604, 0.0349066), Vector3(0.00872665, 1.94604, 0.287979), Vector3(0.602139, 2.22529, -0.158825), Vector3(0.30107, 1.66537, -0.966857), Vector3(0.30107, 1.66537, -0.966857), Vector3(0.301942, 1.9443, -0.966912)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("AnimatedObjects/Crowbar:position")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.0666667, 0.166667, 0.266667, 0.366667, 0.46, 0.466667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0.33, -0.099, -0.957), Vector3(0.23, 0.031, -0.957), Vector3(-0.176, -0.032, -0.957), Vector3(-0.176, -0.127, -0.687), Vector3(-0.141, -0.362, -0.687), Vector3(-0.446, -0.362, -0.687)]
}

[sub_resource type="Animation" id="Animation_hbgry"]
resource_name = "unbalanced"
length = 6.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CameraPivot:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.7, 1.2, 2.1, 2.6, 3.7, 4.4, 6),
"transitions": PackedFloat32Array(2, 2, 2, 2, 2, 2, 2),
"update": 0,
"values": [Vector3(-1.309, 0, 0), Vector3(-1.48353, 0, 0), Vector3(-1.44862, 0.463385, 0), Vector3(-0.977384, 0.20944, -0.806342), Vector3(-1.309, 0, 0.261799), Vector3(-0.959931, 0, 0), Vector3(-1.309, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CameraPivot:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.03333, 2.4, 3.4, 4.7, 6),
"transitions": PackedFloat32Array(2, 2, 2, 2, 2, 2),
"update": 0,
"values": [Vector3(0, -0.135978, 0), Vector3(0, -0.0746599, 0), Vector3(0, -0.0853905, 0), Vector3(0, -0.10072, 0), Vector3(0, -0.407561, 0), Vector3(0, -0.135978, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_1d5hg"]
_data = {
"RESET": SubResource("Animation_1ivek"),
"change_batteries": SubResource("Animation_6pxw8"),
"floor": SubResource("Animation_f0x85"),
"load_gun": SubResource("Animation_lwqgl"),
"losing_balance": SubResource("Animation_hxgs6"),
"no_animation": SubResource("Animation_yw3n8"),
"no_movement_pivot": SubResource("Animation_jsxkr"),
"pills": SubResource("Animation_ke5us"),
"prepare_crowbar": SubResource("Animation_838k8"),
"prepare_gun": SubResource("Animation_dutym"),
"swing_crowbar": SubResource("Animation_2vcw6"),
"unbalanced": SubResource("Animation_hbgry")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rnanc"]
animation = &"pills"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5bcms"]
animation = &"prepare_gun"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ivxe4"]
animation = &"floor"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_10ho8"]
animation = &"no_animation"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7deig"]
animation = &"no_movement_pivot"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_a4g0y"]
animation = &"swing_crowbar"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_cwxrh"]
animation = &"prepare_crowbar"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_p52ax"]
animation = &"load_gun"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hx86p"]
animation = &"change_batteries"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_3dwcv"]
animation = &"unbalanced"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_h0v5c"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_fwq1o"]

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_gs2nd"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_6uxev"]

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_yf1bc"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_7ay31"]

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_x81h2"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_i8rto"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_kecm2"]

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_pj02h"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5xjhm"]
animation = &"losing_balance"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_rl3gr"]

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_bgwig"]

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_otsha"]
fadein_time = 2.0

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_qem71"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_x2kci"]
nodes/Animation/node = SubResource("AnimationNodeAnimation_3dwcv")
nodes/Animation/position = Vector2(300, 380)
"nodes/Animation 10/node" = SubResource("AnimationNodeAnimation_rnanc")
"nodes/Animation 10/position" = Vector2(1580, 320)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_5bcms")
"nodes/Animation 2/position" = Vector2(720, 300)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_ivxe4")
"nodes/Animation 3/position" = Vector2(-60, 380)
"nodes/Animation 4/node" = SubResource("AnimationNodeAnimation_10ho8")
"nodes/Animation 4/position" = Vector2(-320, 0)
"nodes/Animation 5/node" = SubResource("AnimationNodeAnimation_7deig")
"nodes/Animation 5/position" = Vector2(-360, 300)
"nodes/Animation 6/node" = SubResource("AnimationNodeAnimation_a4g0y")
"nodes/Animation 6/position" = Vector2(2260, 520)
"nodes/Animation 7/node" = SubResource("AnimationNodeAnimation_cwxrh")
"nodes/Animation 7/position" = Vector2(1820, 560)
"nodes/Animation 8/node" = SubResource("AnimationNodeAnimation_p52ax")
"nodes/Animation 8/position" = Vector2(1000, 280)
"nodes/Animation 9/node" = SubResource("AnimationNodeAnimation_hx86p")
"nodes/Animation 9/position" = Vector2(1240, 300)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_fwq1o")
nodes/TimeScale/position = Vector2(1880, 320)
"nodes/TimeScale 2/node" = SubResource("AnimationNodeTimeScale_h0v5c")
"nodes/TimeScale 2/position" = Vector2(500, 220)
nodes/change_batteries_trigger/node = SubResource("AnimationNodeOneShot_gs2nd")
nodes/change_batteries_trigger/position = Vector2(1480, 0)
nodes/crowbar_Swing_timescale/node = SubResource("AnimationNodeTimeScale_6uxev")
nodes/crowbar_Swing_timescale/position = Vector2(2440, 340)
nodes/crowbar_prepare/node = SubResource("AnimationNodeOneShot_yf1bc")
nodes/crowbar_prepare/position = Vector2(2380, 40)
nodes/crowbar_prepare_timescale/node = SubResource("AnimationNodeTimeScale_7ay31")
nodes/crowbar_prepare_timescale/position = Vector2(2080, 340)
nodes/crowbar_swing/node = SubResource("AnimationNodeOneShot_x81h2")
nodes/crowbar_swing/position = Vector2(2680, 60)
nodes/fix_pivot_movement/node = SubResource("AnimationNodeBlend2_i8rto")
nodes/fix_pivot_movement/position = Vector2(-40, 0)
nodes/floor_blend/node = SubResource("AnimationNodeBlend2_kecm2")
nodes/floor_blend/position = Vector2(360, 0)
nodes/load_gun_trigger/node = SubResource("AnimationNodeOneShot_pj02h")
nodes/load_gun_trigger/position = Vector2(1260, 20)
"nodes/losing balance_anim/node" = SubResource("AnimationNodeAnimation_5xjhm")
"nodes/losing balance_anim/position" = Vector2(1620, 500)
nodes/losing_balance/node = SubResource("AnimationNodeBlend2_rl3gr")
nodes/losing_balance/position = Vector2(2100, 60)
nodes/output/position = Vector2(2940, 80)
nodes/pills_trigger/node = SubResource("AnimationNodeOneShot_bgwig")
nodes/pills_trigger/position = Vector2(1840, 20)
nodes/prepare_gun_trigger/node = SubResource("AnimationNodeOneShot_otsha")
nodes/prepare_gun_trigger/position = Vector2(1000, 0)
nodes/unbalanced_blend/node = SubResource("AnimationNodeBlend2_qem71")
nodes/unbalanced_blend/position = Vector2(700, 0)
node_connections = [&"TimeScale", 0, &"losing balance_anim", &"TimeScale 2", 0, &"Animation", &"change_batteries_trigger", 0, &"load_gun_trigger", &"change_batteries_trigger", 1, &"Animation 9", &"crowbar_Swing_timescale", 0, &"Animation 6", &"crowbar_prepare", 0, &"losing_balance", &"crowbar_prepare", 1, &"crowbar_prepare_timescale", &"crowbar_prepare_timescale", 0, &"Animation 7", &"crowbar_swing", 0, &"crowbar_prepare", &"crowbar_swing", 1, &"crowbar_Swing_timescale", &"fix_pivot_movement", 0, &"Animation 4", &"fix_pivot_movement", 1, &"Animation 5", &"floor_blend", 0, &"fix_pivot_movement", &"floor_blend", 1, &"Animation 3", &"load_gun_trigger", 0, &"prepare_gun_trigger", &"load_gun_trigger", 1, &"Animation 8", &"losing_balance", 0, &"pills_trigger", &"losing_balance", 1, &"TimeScale", &"output", 0, &"crowbar_swing", &"pills_trigger", 0, &"change_batteries_trigger", &"pills_trigger", 1, &"Animation 10", &"prepare_gun_trigger", 0, &"unbalanced_blend", &"prepare_gun_trigger", 1, &"Animation 2", &"unbalanced_blend", 0, &"floor_blend", &"unbalanced_blend", 1, &"TimeScale 2"]

[sub_resource type="BoxShape3D" id="BoxShape3D_e43ec"]
size = Vector3(0.615, 1.40515, 1.02783)

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_3oo6b"]
playback_mode = 1
random_pitch = 1.2
streams_count = 1
stream_0/stream = ExtResource("44_6afom")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_is4bw"]
random_pitch = 1.15
streams_count = 2
stream_0/stream = ExtResource("52_4w4ci")
stream_1/stream = ExtResource("53_2yagw")

[node name="Player" type="CharacterBody3D" groups=["player"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
collision_layer = 4
collision_mask = 3
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true
floor_max_angle = 0.959931
script = ExtResource("1_ref5g")
speed = 0.2

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
stretch = true
metadata/_edit_use_anchors_ = true

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
transparent_bg = true
handle_input_locally = false
size = Vector2i(640, 360)
render_target_update_mode = 4

[node name="WeaponCamera" type="Camera3D" parent="SubViewportContainer/SubViewport"]
cull_mask = 2
fov = 33.0

[node name="GunModel" parent="SubViewportContainer/SubViewport/WeaponCamera" instance=ExtResource("21_lgr1q")]
transform = Transform3D(1.22062e-09, -8.74143e-08, 2, -1.99981, -0.0279244, 0, 0.0279244, -1.99981, -8.74228e-08, 0, -0.072, -0.19)
visible = false

[node name="Gun" parent="SubViewportContainer/SubViewport/WeaponCamera/GunModel" index="0"]
transform = Transform3D(0.99863, 0.052336, 0, -0.052336, 0.99863, 0, 0, 0, 1, -0.01, 0, 0)
layers = 2

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="SubViewportContainer/SubViewport/WeaponCamera/GunModel/Gun" index="0"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, -0.0115109, 0.0476981, 2.11636e-16)
remote_path = NodePath("../../../../../../CameraPivot/FollowPivot/WorldCamera/GunRay")

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("2_g0cef")
initial_state = NodePath("Walker")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("3_4b8lt")

[node name="Walk" type="Node" parent="StateMachine"]
script = ExtResource("4_gw7tn")
sprint_multiplier = 3.5

[node name="Walker" type="Node" parent="StateMachine"]
script = ExtResource("5_h6v2u")
speed = 0.5
rotation_speed = 0.24
aceleration_value = 200.0
max_rotation_acceleration = 1.5
cooldown = 1.5

[node name="Aim" type="Node" parent="StateMachine"]
script = ExtResource("6_rtwvu")
aim_multiplier = 0.1

[node name="SensibilityTimer" type="Timer" parent="StateMachine/Aim"]
wait_time = 0.5
autostart = true

[node name="ShootCooldown" type="Timer" parent="StateMachine/Aim"]

[node name="PrepareGun" type="Node" parent="StateMachine"]
script = ExtResource("7_hfrgh")
cooldown = 1.5

[node name="Cooldown" type="Timer" parent="StateMachine/PrepareGun"]
wait_time = 1.5
one_shot = true

[node name="Unbalanced" type="Node" parent="StateMachine"]
script = ExtResource("8_7b01x")
time_to_keep_balance = 7.0
necessary_keys_to_press = 12
margin_of_error = 3.0
difficulty_increase = 0.6

[node name="Timer" type="Timer" parent="StateMachine/Unbalanced"]
one_shot = true

[node name="ErrorTimer" type="Timer" parent="StateMachine/Unbalanced"]
one_shot = true

[node name="Downed" type="Node" parent="StateMachine"]
script = ExtResource("9_q33c7")
probability_to_lose_items = 80

[node name="PlayerLongInteraction" type="Node" parent="StateMachine"]
script = ExtResource("10_b71wi")
cooldown = 2.0

[node name="CrowbarSwing" type="Node" parent="StateMachine"]
script = ExtResource("12_6so70")

[node name="Timer" type="Timer" parent="StateMachine/CrowbarSwing"]
wait_time = 0.3
one_shot = true

[node name="TakePill" type="Node" parent="StateMachine"]
script = ExtResource("13_dsee1")

[node name="LoadGun" type="Node" parent="StateMachine"]
script = ExtResource("14_3bkdw")
cooldown = 2.0

[node name="ChangeBatteries" type="Node" parent="StateMachine"]
script = ExtResource("15_6uppe")

[node name="PlayerCapsule" type="MeshInstance3D" parent="."]
visible = false
mesh = SubResource("CapsuleMesh_fyred")

[node name="Components" type="Node" parent="."]

[node name="Balance" type="Node" parent="Components"]
script = ExtResource("16_ipk1w")
max_balance = 7000.0
sprint_penalty = 150.0
rotation_cost_divident = 30.0
swing_cost = 1000.0
getting_hit_cost = 500.0
bonus_balance_recovery = 60.0

[node name="BalanceRecoveryTimer" type="Timer" parent="Components/Balance"]
wait_time = 0.5
autostart = true

[node name="PillBonusTimer" type="Timer" parent="Components/Balance"]
wait_time = 12.0
one_shot = true

[node name="UI" parent="Components/Balance" instance=ExtResource("17_e0317")]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 0.0
offset_bottom = 0.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4

[node name="BalanceBar" type="ProgressBar" parent="Components/Balance/UI"]
visible = false
visibility_layer = 3
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -57.5
offset_top = -35.665
offset_right = 57.5
offset_bottom = -21.665
grow_horizontal = 2
grow_vertical = 0
show_percentage = false

[node name="BalanceFeedback" type="Node" parent="Components/Balance"]
script = ExtResource("18_y0x57")
first_warning_cd = 4.0
second_warning_cd = 4.0
third_warning_cd = 4.0
first_warning_threshold = 35
second_warning_threshold = 65
third_warning_threshold = 90
first_warning_messages = Array[String](["Your vision blurs, as if the room itself is swaying", "A cold sweat breaks across your skin; something feels wrong", "You hear a faint ringing in your ears, like distant whispers", "The walls seem closer, the air heavier", "Your steps feel unsteady, as though the floor is shifting beneath you"])
second_warning_messages = Array[String](["The room spins uncontrollably; your grip on reality weakens", "Your pulse races as shadows twist and warp before your eyes", "Each breath feels heavier, suffocating in the ever-narrowing space", "You struggle to stay upright, your mind drowning in a whirlpool of confusion", "It feels like you're sinking, the weight of the world pressing down on you"])
third_warning_messages = Array[String](["The world collapses around you; nothing feels real anymore", "Your body betrays you, trembling uncontrollably, as your thoughts fracture", "It’s too late. The walls are closing in, crushing your sense of self", "The ground beneath you is gone; you’re falling into an endless abyss", "A creeping void overtakes your mind; there's no escape now"])

[node name="FirstWarningTimer" type="Timer" parent="Components/Balance/BalanceFeedback"]
one_shot = true

[node name="SecondWarningTimer" type="Timer" parent="Components/Balance/BalanceFeedback"]
one_shot = true

[node name="ThirdWarningTimer" type="Timer" parent="Components/Balance/BalanceFeedback"]
one_shot = true

[node name="CheckBalanceState" type="Timer" parent="Components/Balance/BalanceFeedback"]
wait_time = 0.4
autostart = true

[node name="AmmoCounter" type="Node" parent="Components"]
script = ExtResource("11_xb6v7")
reload_hint = ExtResource("18_6q2xb")

[node name="Inventory" type="Node" parent="Components"]
script = ExtResource("15_8pfmq")
batteries_amount = 2
pills = 2

[node name="PlayerHealth" type="Node" parent="Components"]
script = ExtResource("20_8ocdq")
full_health_messages = Array[String](["Strength surges back—your body remembers what it means to endure", "The weight lifts, the pain fades, and you stand renewed", "Your breath steadies, your wounds seal—another chance to fight", "The specter of death retreats, if only for a moment", "A second wind fills your lungs, defying the shadows that sought you", "You feel whole again, but scars remember", "Pain is gone, but its memory lingers—you will not falter", "Grace fills your limbs, and your wounds close—His mercy endures", "The pain is lifted, your path restored—rise, for your trial is not yet over", "You stand renewed, as if the hand of the divine has granted you reprieve"])
damaged_messages = Array[String](["Your breath falters, pain creeping into your every step", "A crimson stain blooms—your body betrays you", "Your limbs grow heavy, your heartbeat hammers in your ears", "The wound stings, a cruel reminder that you are still alive", "Warm blood trickles down—weakness seeps in", "You stumble, the world tilting as agony sets in", "Your strength wavers, but you are not done yet", "Your flesh is torn, yet suffering is but the path to salvation", "A trial of pain, a test of faith—endure, and He shall not forsake you", "Blood spills, but in suffering, the soul is refined"])
dying_messages = Array[String](["Each step is a struggle, each breath a desperate plea", "Darkness lingers at the edges of your vision—your body is failing", "Your hands tremble, your legs barely obey—this is the end drawing near", "A cold weight settles in your chest. You are slipping away", "Pain is distant now, replaced by the creeping embrace of oblivion", "Your body is a shattered vessel, moving only by sheer will", "You are on borrowed time, and the debt is coming due", "Your body crumbles, but the soul must not waver—He watches still", "Each step is a penance, each breath a prayer—redemption nears", "The veil grows thin, and the weight of sin presses upon you"])

[node name="DamagedHealTimer" type="Timer" parent="Components/PlayerHealth"]

[node name="PlayerCollisionShape" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.270905, -0.355084)
shape = ExtResource("12_6t6rn")

[node name="CameraPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.258816, 0.965927, 0, -0.965927, 0.258816, 0, 0.54, 0)

[node name="FollowPivot" type="Node3D" parent="CameraPivot"]
top_level = true

[node name="WorldCamera" type="Camera3D" parent="CameraPivot/FollowPivot"]
cull_mask = 1048573
fov = 33.0
script = ExtResource("2_cywkd")
speed = 20.0

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="CameraPivot/FollowPivot/WorldCamera"]
remote_path = NodePath("../../../../SubViewportContainer/SubViewport/WeaponCamera")

[node name="AimShakeTimer" type="Timer" parent="CameraPivot/FollowPivot/WorldCamera"]
wait_time = 0.297
autostart = true

[node name="InteractableRay" type="RayCast3D" parent="CameraPivot/FollowPivot/WorldCamera"]
target_position = Vector3(0, 0, -2)
collision_mask = 65
hit_from_inside = true
debug_shape_thickness = 1

[node name="GunRay" type="RayCast3D" parent="CameraPivot/FollowPivot/WorldCamera"]
transform = Transform3D(5.79386e-09, 2, -1.92145e-10, -1.99561, 5.79387e-09, 0.132548, 0.132548, -1.91953e-10, 1.99561, -4.23963e-09, -0.0353529, -0.286992)
target_position = Vector3(0, 0, -12)
collision_mask = 129
hit_from_inside = true
collide_with_areas = true
debug_shape_custom_color = Color(0.756863, 0.00392157, 0.941176, 1)
debug_shape_thickness = 1

[node name="PlayerBaseLight" type="OmniLight3D" parent="CameraPivot/FollowPivot/WorldCamera"]
layers = 3
light_color = Color(0.572988, 0.572988, 0.572988, 1)
light_energy = 0.35
omni_range = 2.07782
omni_attenuation = 0.0

[node name="PlayerUI" type="Control" parent="." groups=["player_ui"]]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
mouse_filter = 2
script = ExtResource("14_0ypvp")

[node name="MarginContainer" type="MarginContainer" parent="PlayerUI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/margin_left = 8
theme_override_constants/margin_top = 8
theme_override_constants/margin_right = 8
theme_override_constants/margin_bottom = 8

[node name="StateLabel" type="Label" parent="PlayerUI/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
label_settings = SubResource("LabelSettings_cswfq")

[node name="Crosshair" type="CenterContainer" parent="PlayerUI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Control" type="Control" parent="PlayerUI/Crosshair"]
layout_mode = 2
script = ExtResource("27_ktygo")

[node name="Timer" type="Timer" parent="PlayerUI"]

[node name="ControlHints" type="HBoxContainer" parent="PlayerUI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
alignment = 1

[node name="Const-Text" type="MarginContainer" parent="PlayerUI/ControlHints"]
visible = false
layout_mode = 2

[node name="GrabWalkerUI" type="HBoxContainer" parent="PlayerUI/ControlHints/Const-Text"]
layout_mode = 2
alignment = 1

[node name="TextureRect" type="TextureRect" parent="PlayerUI/ControlHints/Const-Text/GrabWalkerUI"]
visible = false
layout_mode = 2

[node name="ConstLable" type="Label" parent="PlayerUI/ControlHints/Const-Text/GrabWalkerUI"]
layout_mode = 2
size_flags_vertical = 0
text = "R- Grab walker"
label_settings = SubResource("LabelSettings_eftwr")
horizontal_alignment = 1
vertical_alignment = 1

[node name="I-Text" type="MarginContainer" parent="PlayerUI/ControlHints"]
visible = false
layout_mode = 2

[node name="GrabWalkerUI" type="HBoxContainer" parent="PlayerUI/ControlHints/I-Text"]
layout_mode = 2
alignment = 1

[node name="TextureRect" type="TextureRect" parent="PlayerUI/ControlHints/I-Text/GrabWalkerUI"]
visible = false
layout_mode = 2

[node name="InteractionLable" type="Label" parent="PlayerUI/ControlHints/I-Text/GrabWalkerUI"]
layout_mode = 2
size_flags_vertical = 0
text = "R- Grab walker"
label_settings = SubResource("LabelSettings_eftwr")
horizontal_alignment = 1
vertical_alignment = 1

[node name="BalanceOverlay" type="TextureRect" parent="PlayerUI"]
modulate = Color(0.823529, 0.823529, 0.823529, 0)
z_index = -90
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("30_c2sls")
expand_mode = 2
stretch_mode = 5

[node name="BalanceOverlayAnimationPlayer" type="AnimationPlayer" parent="PlayerUI/BalanceOverlay"]
libraries = {
"": SubResource("AnimationLibrary_0afux")
}

[node name="DamagedOverlay" type="TextureRect" parent="PlayerUI"]
visible = false
z_index = -90
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("28_43xm4")
expand_mode = 2
stretch_mode = 5

[node name="HearthBeat" type="ColorRect" parent="PlayerUI"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="DyingOverlay" type="TextureRect" parent="PlayerUI"]
visible = false
modulate = Color(0.823529, 0.823529, 0.823529, 1)
z_index = -90
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("31_i030a")
expand_mode = 2
stretch_mode = 5

[node name="DangerOverlay" type="TextureRect" parent="PlayerUI"]
visible = false
modulate = Color(1, 1, 1, 0)
z_index = -90
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("32_sb6m1")
expand_mode = 2
stretch_mode = 5

[node name="DangerOverlayAnimator" type="AnimationPlayer" parent="PlayerUI/DangerOverlay"]
libraries = {
"": SubResource("AnimationLibrary_dktf4")
}
autoplay = "danger"

[node name="BalancedUI" type="Control" parent="PlayerUI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("28_qoh17")
modulate_color_light = Color(0.784314, 0.784314, 0.784314, 1)
modulate_color_dark = Color(0.27451, 0.27451, 0.27451, 1)

[node name="HBoxContainer" type="HBoxContainer" parent="PlayerUI/BalancedUI"]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -46.0
offset_bottom = -10.0
grow_horizontal = 2
grow_vertical = 0
alignment = 1

[node name="LeftTexture" type="TextureRect" parent="PlayerUI/BalancedUI/HBoxContainer"]
modulate = Color(0.27451, 0.266667, 0.266667, 1)
layout_mode = 2
texture = ExtResource("28_rfyh2")
expand_mode = 3
stretch_mode = 5

[node name="LeftLable" type="Label" parent="PlayerUI/BalancedUI/HBoxContainer/LeftTexture"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "S"
label_settings = ExtResource("29_rdawv")
horizontal_alignment = 1
vertical_alignment = 1

[node name="RightTexture" type="TextureRect" parent="PlayerUI/BalancedUI/HBoxContainer"]
modulate = Color(0.817521, 0.817521, 0.817521, 1)
layout_mode = 2
texture = ExtResource("28_rfyh2")
expand_mode = 3
stretch_mode = 5

[node name="RightLAble" type="Label" parent="PlayerUI/BalancedUI/HBoxContainer/RightTexture"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "S"
label_settings = ExtResource("29_rdawv")
horizontal_alignment = 1
vertical_alignment = 1

[node name="BalanceAnimationTimer" type="Timer" parent="PlayerUI/BalancedUI"]
wait_time = 0.2
autostart = true

[node name="PlayerGameplayInfo" type="Label" parent="PlayerUI"]
layout_mode = 1
anchors_preset = 14
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_top = -14.0
offset_bottom = 12.0
grow_horizontal = 2
grow_vertical = 2
text = "dfasdfa"
label_settings = SubResource("LabelSettings_3m322")
horizontal_alignment = 1
autowrap_mode = 3

[node name="PlayerVHSEffect" type="ColorRect" parent="PlayerUI"]
visible = false
z_index = 1000
material = SubResource("ShaderMaterial_khsgn")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("35_5ytlk")

[node name="PlayerGameMenu" type="Control" parent="PlayerUI"]
process_mode = 3
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("31_0c3op")

[node name="PanelContainer" type="PanelContainer" parent="PlayerUI/PlayerGameMenu"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2

[node name="HBoxContainer" type="HBoxContainer" parent="PlayerUI/PlayerGameMenu/PanelContainer"]
layout_mode = 2

[node name="ButtonsPanel" type="PanelContainer" parent="PlayerUI/PlayerGameMenu/PanelContainer/HBoxContainer"]
layout_mode = 2

[node name="Buttons" type="VBoxContainer" parent="PlayerUI/PlayerGameMenu/PanelContainer/HBoxContainer/ButtonsPanel"]
layout_mode = 2

[node name="ResumeButton" type="Button" parent="PlayerUI/PlayerGameMenu/PanelContainer/HBoxContainer/ButtonsPanel/Buttons"]
layout_mode = 2
text = "Resume"

[node name="QuitButton" type="Button" parent="PlayerUI/PlayerGameMenu/PanelContainer/HBoxContainer/ButtonsPanel/Buttons"]
layout_mode = 2
text = "Exit"

[node name="ControllsPanel" type="PanelContainer" parent="PlayerUI/PlayerGameMenu/PanelContainer/HBoxContainer"]
layout_mode = 2

[node name="MarginContainer" type="MarginContainer" parent="PlayerUI/PlayerGameMenu/PanelContainer/HBoxContainer/ControllsPanel"]
layout_mode = 2
theme_override_constants/margin_left = 5
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 5
theme_override_constants/margin_bottom = 5

[node name="Controlls" type="Label" parent="PlayerUI/PlayerGameMenu/PanelContainer/HBoxContainer/ControllsPanel/MarginContainer"]
custom_minimum_size = Vector2(300, 0)
layout_mode = 2
text = "W, A, S, D – Move
I (press/hold) – Interact
Right Mouse Button (M2) – Prepare weapon
Spacebar – Toggle flashlight
P – Take pills
L (while holding a gun) – Reload gun
B (while holding a flashlight) – Change batteries"
label_settings = ExtResource("31_u8436")
autowrap_mode = 3

[node name="GameOverMenu" parent="PlayerUI" instance=ExtResource("7_keanm")]
visible = false
z_index = 765
layout_mode = 1
mouse_filter = 1

[node name="WalkerFixedPoint" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.705582, -0.711028)

[node name="Walker" parent="WalkerFixedPoint" instance=ExtResource("20_qts6k")]

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_1d5hg")
}
autoplay = "RESET"

[node name="AnimatedObjects" type="Node3D" parent="."]

[node name="GunModel" parent="AnimatedObjects" instance=ExtResource("21_lgr1q")]
transform = Transform3D(-5.79198e-06, 1.6, 0, -1.6, -5.79198e-06, 0, 0, 0, 1.6, 0, 0.25, -0.116873)
visible = false

[node name="Crowbar" parent="AnimatedObjects" instance=ExtResource("22_r00kl")]
transform = Transform3D(-0.365312, -0.126945, 0.136132, 0, 0.299855, 0.279619, -0.186138, 0.249142, -0.267172, -0.085, -0.244, -0.957)
visible = false

[node name="FlaslightModel" parent="AnimatedObjects" instance=ExtResource("28_lrh3t")]
transform = Transform3D(0.375, 0, 0, 0, 0.375, 0, 0, 0, 0.375, 0, 0.25, -0.116873)
visible = false

[node name="PillsModel" parent="AnimatedObjects" instance=ExtResource("29_vkalu")]
transform = Transform3D(0.12, 0, 0, 0, 0.0940471, 0.0745328, 0, -0.0745328, 0.0940471, 0, 0.177635, -0.132516)
visible = false

[node name="AnimationTree" type="AnimationTree" parent="."]
process_thread_group = 1
process_thread_group_order = 0
process_thread_messages = 0
deterministic = false
tree_root = SubResource("AnimationNodeBlendTree_x2kci")
anim_player = NodePath("../AnimationPlayer")
parameters/TimeScale/scale = 2.0
"parameters/TimeScale 2/scale" = 0.8
parameters/change_batteries_trigger/active = false
parameters/change_batteries_trigger/internal_active = false
parameters/change_batteries_trigger/request = 0
parameters/crowbar_Swing_timescale/scale = 1.0
parameters/crowbar_prepare/active = false
parameters/crowbar_prepare/internal_active = false
parameters/crowbar_prepare/request = 0
parameters/crowbar_prepare_timescale/scale = 1.0
parameters/crowbar_swing/active = false
parameters/crowbar_swing/internal_active = false
parameters/crowbar_swing/request = 0
parameters/fix_pivot_movement/blend_amount = 0.0
parameters/floor_blend/blend_amount = 0.0
parameters/load_gun_trigger/active = false
parameters/load_gun_trigger/internal_active = false
parameters/load_gun_trigger/request = 0
parameters/losing_balance/blend_amount = 0.0
parameters/pills_trigger/active = false
parameters/pills_trigger/internal_active = false
parameters/pills_trigger/request = 0
parameters/prepare_gun_trigger/active = false
parameters/prepare_gun_trigger/internal_active = false
parameters/prepare_gun_trigger/request = 0
parameters/unbalanced_blend/blend_amount = 0.0
script = ExtResource("22_j0g4a")

[node name="CrowbarAttackHitbox" type="Area3D" parent="."]
collision_layer = 0
collision_mask = 30719
monitoring = false
script = ExtResource("24_nhdqm")

[node name="CollisionShape3D" type="CollisionShape3D" parent="CrowbarAttackHitbox"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0120463, -0.694071)
shape = SubResource("BoxShape3D_e43ec")

[node name="FlashlightPivot" type="Node3D" parent="."]

[node name="PlayerAudioManager" type="Node3D" parent="." groups=["player_audio"]]
script = ExtResource("36_f26nf")
walk_footsteps_time = 2.0
walker_footsteps_time = 1.0
run_footsteps_time = 0.5

[node name="PlayerVoice" type="AudioStreamPlayer3D" parent="PlayerAudioManager"]

[node name="PlayerFootsteps" type="AudioStreamPlayer3D" parent="PlayerAudioManager"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.935457, 0)
stream = SubResource("AudioStreamRandomizer_3oo6b")
volume_db = -23.0

[node name="WalkerWheels" type="AudioStreamPlayer3D" parent="PlayerAudioManager"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.939767, -0.870794)
stream = ExtResource("45_2ydpv")
volume_db = -18.0
pitch_scale = 0.85

[node name="Item" type="AudioStreamPlayer3D" parent="PlayerAudioManager"]

[node name="FootStepsTimer" type="Timer" parent="PlayerAudioManager"]

[node name="BalanceClues" type="AudioStreamPlayer" parent="PlayerAudioManager"]
stream = ExtResource("46_ki68j")
volume_db = 15.0

[node name="Heartbeat" type="AudioStreamPlayer" parent="PlayerAudioManager"]
stream = ExtResource("49_234b6")
volume_db = 12.0

[node name="HitFlesh" type="AudioStreamPlayer" parent="PlayerAudioManager"]
stream = SubResource("AudioStreamRandomizer_is4bw")

[connection signal="transitioned" from="StateMachine" to="Components/Balance" method="_on_state_machine_transitioned"]
[connection signal="transitioned" from="StateMachine" to="AnimationTree" method="_on_state_machine_transitioned"]
[connection signal="transitioned" from="StateMachine" to="PlayerAudioManager" method="_on_state_machine_transitioned"]
[connection signal="timeout" from="StateMachine/Aim/SensibilityTimer" to="StateMachine/Aim" method="_on_sensibility_timer_timeout"]
[connection signal="timeout" from="StateMachine/Unbalanced/Timer" to="StateMachine/Unbalanced" method="_on_timer_timeout"]
[connection signal="timeout" from="StateMachine/Unbalanced/ErrorTimer" to="StateMachine/Unbalanced" method="_on_error_timer_timeout"]
[connection signal="timeout" from="Components/Balance/BalanceRecoveryTimer" to="Components/Balance" method="_on_balance_recovery_timer_timeout"]
[connection signal="new_threshold_reached" from="Components/Balance/BalanceFeedback" to="PlayerAudioManager" method="_on_balance_feedback_new_threshold_reached"]
[connection signal="timeout" from="Components/Balance/BalanceFeedback/CheckBalanceState" to="Components/Balance/BalanceFeedback" method="_on_check_balance_state_timeout"]
[connection signal="new_heal_state" from="Components/PlayerHealth" to="PlayerUI" method="_on_player_health_new_heal_state"]
[connection signal="timeout" from="Components/PlayerHealth/DamagedHealTimer" to="Components/PlayerHealth" method="_on_damaged_heal_timer_timeout"]
[connection signal="timeout" from="CameraPivot/FollowPivot/WorldCamera/AimShakeTimer" to="CameraPivot/FollowPivot/WorldCamera" method="_on_aim_shake_timer_timeout"]
[connection signal="pressed" from="PlayerUI/PlayerGameMenu/PanelContainer/HBoxContainer/ButtonsPanel/Buttons/ResumeButton" to="PlayerUI/PlayerGameMenu" method="_on_resume_button_pressed"]
[connection signal="pressed" from="PlayerUI/PlayerGameMenu/PanelContainer/HBoxContainer/ButtonsPanel/Buttons/QuitButton" to="PlayerUI/PlayerGameMenu" method="_on_quit_button_pressed"]
[connection signal="WalkerInteracted" from="WalkerFixedPoint/Walker" to="." method="_on_walker_walker_interacted"]
[connection signal="area_entered" from="CrowbarAttackHitbox" to="CrowbarAttackHitbox" method="_on_area_entered"]
[connection signal="timeout" from="PlayerAudioManager/FootStepsTimer" to="PlayerAudioManager" method="_on_foot_steps_timer_timeout"]

[editable path="SubViewportContainer/SubViewport/WeaponCamera/GunModel"]
